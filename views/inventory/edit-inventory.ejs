<% if (title) { %>
    <h1><%= title %></h1>
<% } else {
    res.redirect('/')
} %>

<%- messages() %>

<% if (errors) { %>
    <ul class="notice">
    <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
    <%  }) %>
    </ul>
<% } %>

<!-- Build Modify Vehicle/Inventory Form-->
<form id="updateForm" class="input-form" action="/inv/update" method="post">
    <span class="required-info">All fields are required</span>
    <fieldset>
        <label>Update Classification:
            <%- classification_select %>
        </label>
        <label>Make:
            <input type="text" name="inv_make" id="inv-make" title="Enter your new vehicle's make" placeholder="Min of 3 characters" required pattern="^[^\s][a-zA-Z\s]{2,}$" value="<%= locals.inv_make %>">
        </label>
        <label>Model:
            <input type="text" name="inv_model" id="inv-model" title="Enter your new vehicle's model" placeholder="Min of 3 characters" required pattern="^[^\s][a-zA-Z\s]{2,}$" value="<%= locals.inv_model %>">
        </label>
        <label>Description:
            <textarea name="inv_description" id="inv-description" title="Enter your new vehicle's description" rows="5" required><%= locals.inv_description %></textarea>
        </label>
        <label>Image Path:
            <input type="text" name="inv_image" id="inv-image" title="Enter your new image path" placeholder="Must be a valid path" required pattern="^\/[a-zA-Z0-9_\-\/.]+$" value="<%- locals.inv_image || '/images/vehicles/no-image.png' %>">
        </label>
        <label>Thumbnail Path:
            <input type="text" name="inv_thumbnail" id="inv-thumbnail" title="Enter your new thumbnail path" placeholder="Must be a valid path" required pattern="^\/[a-zA-Z0-9_\-\/.]+$" value="<%- locals.inv_thumbnail || '/images/vehicles/no-image.png' %>">
        </label>
        <label>Price:
            <input type="text" name="inv_price" id="inv-price" title="Enter your new vehicle's price" placeholder="Decimel or Integer" required pattern="^[0-9,.]+$" value="<%= locals.inv_price %>">
        </label>
        <label>Year:
            <input type="number" name="inv_year" id="inv-year" title="Enter your new vehicle's year" placeholder="4-digit year" required min="1000" max="9999" value="<%= locals.inv_year %>">
        </label>
        <label>Miles:
            <input type="number" name="inv_miles" id="inv-miles" title="Enter your new vehicle's miles" placeholder="Digits only" required min="0" max="999999" value="<%= locals.inv_miles %>">
        </label>
        <label>Color:
            <input type="text" name="inv_color" id="inv-color" title="Enter your new vehicle color" required pattern="^[^\s][a-zA-Z\s]{2,}$" value="<%= locals.inv_color %>">
        </label>
    </fieldset>
    <input class="submitButton" type="submit" value="Update Vehicle" disabled>
    <input type="hidden" name="inv_id"
    <% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
    <% } %>>
</form>

<script src="../../js/inv-update.js"></script>